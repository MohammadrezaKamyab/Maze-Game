<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Maze Level Gallery</title>
  <style>
    body {
      background: linear-gradient(135deg, #232526 0%, #414345 100%);
      min-height: 100vh;
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    h1 {
      color: #fff;
      margin-top: 40px;
      margin-bottom: 24px;
      text-shadow: 0 0 16px #00e1ff88;
      font-size: 2.5rem;
      letter-spacing: 2px;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      gap: 32px;
      justify-content: center;
      max-width: 900px;
      margin: 0 auto;
    }
    .level-card {
      background: linear-gradient(135deg, #fffbe6 0%, #ffe066 100%);
      border-radius: 18px;
      box-shadow: 0 4px 24px #1114;
      width: 160px;
      height: 160px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.15s, box-shadow 0.15s;
      position: relative;
      text-align: center;
      opacity: 1;
      pointer-events: auto;
    }
    .level-card.completed {
      opacity: 0.5;
      pointer-events: none;
      filter: grayscale(1);
    }
    .level-card .checkmark {
      position: absolute;
      top: 16px;
      right: 16px;
      font-size: 2rem;
      color: #43ff64;
      text-shadow: 0 0 8px #fff, 0 0 16px #43ff64;
      pointer-events: none;
    }
    .level-card:hover:not(.completed) {
      transform: scale(1.07);
      box-shadow: 0 8px 36px #00e1ff66;
    }
    .level-num {
      font-size: 3rem;
      font-weight: bold;
      color: #ff9800;
      text-shadow: 0 0 8px #fff, 0 0 16px #ff9800;
      margin-bottom: 10px;
    }
    .level-label {
      font-size: 1.2rem;
      color: #232526;
      font-weight: 600;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
  <h1>Maze Level Gallery</h1>
  <div class="gallery">
    <!-- Level cards will be inserted here -->
  </div>
  <script>
    // Helper to get/set completed levels in localStorage
    function getCompletedLevels() {
      try {
        return JSON.parse(localStorage.getItem('maze_completed_levels') || '[]');
      } catch {
        return [];
      }
    }
    function setCompletedLevel(level) {
      const completed = getCompletedLevels();
      if (!completed.includes(level)) {
        completed.push(level);
        localStorage.setItem('maze_completed_levels', JSON.stringify(completed));
      }
    }

    // Listen for completion from maze.html
    window.addEventListener('storage', (e) => {
      if (e.key === 'maze_completed_levels') {
        renderGallery();
      }
    });

    // Render the gallery
    function renderGallery() {
      const gallery = document.querySelector('.gallery');
      gallery.innerHTML = '';
      const completed = getCompletedLevels();
      for (let i = 1; i <= 10; i++) {
        const card = document.createElement('div');
        card.className = 'level-card';
        card.innerHTML = `
          <div class="level-num">${i}</div>
          <div class="level-label">Level ${i}</div>
        `;
        if (completed.includes(i)) {
          card.classList.add('completed');
          card.innerHTML += `<div class="checkmark">âœ”</div>`;
        }
        card.addEventListener('click', () => {
          if (!completed.includes(i)) {
            // Change path to src/maze.html
            window.location.href = `src/maze.html?level=${i}`;
          }
        });
        gallery.appendChild(card);
      }
    }

    renderGallery();
  </script>
</body>
</html>